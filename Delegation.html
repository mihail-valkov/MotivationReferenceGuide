<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Delegation Model Wheel - Quick Reference</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Montserrat', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top left, #1e293b 0%, #020617 55%, #000000 100%);
      color: #e5e7eb;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
      font-size: 16px;
      line-height: 1.6;
    }

    .app {
      display: flex;
      flex-direction: column;
      gap: 32px;
      max-width: 1200px;
      width: 100%;
      border-radius: 20px;
      background: linear-gradient(145deg, rgba(15,23,42,0.95), rgba(15,23,42,0.8));
      box-shadow:
        0 32px 80px rgba(15, 23, 42, 0.9),
        0 0 0 1px rgba(148, 163, 184, 0.1);
      padding: 28px 32px;
    }

    .top-section {
      display: flex;
      gap: 32px;
    }

    @media (max-width: 900px) {
      .top-section {
        flex-direction: column;
        align-items: center;
      }
    }

    .left {
      flex: 0 0 520px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }

    .right {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 12px;
    }

    h1 {
      font-size: 28px;
      font-weight: 700;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      color: #f9fafb;
    }

    .subtitle {
      font-size: 14px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: #9ca3af;
    }

    .wheel-container {
      position: relative;
      width: 480px;
      height: 480px;
    }

    svg {
      width: 100%;
      height: 100%;
      overflow: visible;
    }

    .segment {
      cursor: pointer;
      transition: filter 180ms ease-out, opacity 180ms ease-out, stroke 180ms ease-out;
      opacity: 0.85;
      stroke: transparent;
      stroke-width: 0;
    }

    .segment:hover {
      filter: brightness(1.2) drop-shadow(0 0 8px rgba(255, 255, 255, 0.3));
      opacity: 1;
    }

    .segment.active {
      filter: brightness(1.3) saturate(1.1);
      opacity: 1;
      stroke-width: 4;
    }

    .process-arrow {
      fill: none;
      stroke: #64748b;
      stroke-width: 4;
      stroke-linecap: round;
    }

    .arrow-head {
      fill: #64748b;
    }

    .segment-label {
      font-size: 13px;
      font-weight: 700;
      fill: #0f172a;
      text-anchor: middle;
      pointer-events: none;
    }

    .segment-label tspan {
      dominant-baseline: middle;
    }

    .segment-icon {
      font-size: 22px;
      text-anchor: middle;
      dominant-baseline: middle;
      pointer-events: none;
    }

    .center-circle {
      fill: #020617;
      stroke: rgba(148, 163, 184, 0.6);
      stroke-width: 1.5;
    }

    .center-icon {
      font-size: 40px;
      pointer-events: none;
    }

    /* Right panel */

    .detail-card {
      background: radial-gradient(circle at top, rgba(30, 64, 175, 0.18), rgba(15, 23, 42, 0.95));
      border-radius: 18px;
      padding: 20px 22px;
      box-shadow:
        0 18px 40px rgba(15, 23, 42, 0.8),
        0 0 0 1px rgba(148, 163, 184, 0.2);
      border: 1px solid rgba(37, 99, 235, 0.6);
    }

    .detail-step-label {
      font-size: 13px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #93c5fd;
      margin-bottom: 8px;
    }

    .detail-title {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 8px;
      color: #f9fafb;
    }

    .detail-subtitle {
      font-size: 15px;
      color: #cbd5f5;
      margin-bottom: 14px;
      max-width: 560px;
      line-height: 1.5;
    }

    .detail-list {
      list-style: none;
      font-size: 15px;
      color: #e5e7eb;
      display: grid;
      gap: 8px;
      padding-left: 0;
      line-height: 1.5;
    }

    .detail-list li::before {
      content: "‚Ä¢";
      margin-right: 8px;
      color: #60a5fa;
    }

    .hint {
      font-size: 13px;
      color: #9ca3af;
      margin-top: 6px;
    }

    .hint span {
      color: #bfdbfe;
    }

    /* Delegation Types - Left Tabs Layout */
    .delegation-types {
      display: flex;
      flex-wrap: wrap;
      gap: 0;
      border-top: 1px solid rgba(148, 163, 184, 0.2);
      padding-top: 24px;
    }

    .dt-tabs {
      display: flex;
      flex-direction: column;
      gap: 4px;
      flex: 0 0 290px;
      padding-right: 0;
    }

    .dt-tab {
      background: rgba(30, 41, 59, 0.5);
      border: 1px solid rgba(148, 163, 184, 0.1);
      border-right: none;
      border-radius: 10px 0 0 10px;
      padding: 14px 16px;
      text-align: left;
      font-family: inherit;
      font-size: 15px;
      font-weight: 500;
      color: #94a3b8;
      cursor: pointer;
      transition: all 180ms ease-out;
      display: flex;
      align-items: center;
      gap: 8px;
      line-height: 1.4;
    }

    .dt-tab-icon {
      font-size: 20px;
      flex-shrink: 0;
    }

    .dt-tab:hover {
      background: rgba(51, 65, 85, 0.6);
      color: #e2e8f0;
      border-color: rgba(148, 163, 184, 0.25);
    }

    .dt-tab-active {
      background: radial-gradient(circle at top left, rgba(30, 64, 175, 0.12), rgba(15, 23, 42, 0.9));
      border-color: rgba(148, 163, 184, 0.15);
      border-right: 1px solid transparent;
      color: #93c5fd;
      margin-right: -1px;
      position: relative;
      z-index: 1;
    }

    .dt-tab-active:hover {
      background: radial-gradient(circle at top left, rgba(30, 64, 175, 0.15), rgba(15, 23, 42, 0.95));
      color: #93c5fd;
    }

    .dt-content {
      flex: 1;
      background: radial-gradient(circle at top left, rgba(30, 64, 175, 0.12), rgba(15, 23, 42, 0.9));
      border-radius: 0 14px 14px 14px;
      padding: 20px 24px;
      border: 1px solid rgba(148, 163, 184, 0.15);
    }

    .dt-panel {
      display: none;
    }

    .dt-panel-active {
      display: block;
    }

    .dt-panel h3 {
      font-size: 20px;
      font-weight: 600;
      color: #f1f5f9;
      margin-bottom: 10px;
    }

    .dt-panel .dt-intro {
      font-size: 15px;
      color: #94a3b8;
      margin-bottom: 18px;
      line-height: 1.6;
    }

    .dt-panel ul {
      list-style: none;
      padding: 0;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .dt-panel li {
      font-size: 15px;
      color: #e2e8f0;
      padding-left: 22px;
      position: relative;
      line-height: 1.6;
    }

    .dt-panel li::before {
      content: "‚Ä¢";
      position: absolute;
      left: 0;
      color: #60a5fa;
    }
  </style>
</head>
<body>
<div class="app">
  <div class="top-section">
    <div class="left">
      <div>
        <div class="subtitle">Delegation Process</div>
        <h1>Delegation Wheel Model</h1>
      </div>
      <div class="wheel-container">
        <svg id="delegationWheel" viewBox="-20 -20 440 440"></svg>
      </div>
      <div class="hint">
        Click a segment of the wheel to explore how to delegate that step.
      </div>
    </div>

    <div class="right">
      <div id="detailCard" class="detail-card">
        <div id="detailStepLabel" class="detail-step-label"></div>
        <div id="detailTitle" class="detail-title"></div>
        <div id="detailSubtitle" class="detail-subtitle"></div>
        <ul id="detailList" class="detail-list"></ul>
      </div>
    </div>
  </div>

  <!-- Delegation types section -->
<div class="delegation-types">
  <div style="width: 100%; margin-bottom: 20px;">
    <div class="subtitle">Quick Reference</div>
    <h1>What To Delegate?</h1>
  </div>
  <div class="dt-tabs">
    <button class="dt-tab dt-tab-active" data-target="dt-feature">
      <span class="dt-tab-icon">üöÄ</span> Feature & project ownership
    </button>
    <button class="dt-tab" data-target="dt-tech-areas">
      <span class="dt-tab-icon">üîß</span> Technical area ownership
    </button>
    <button class="dt-tab" data-target="dt-operational">
      <span class="dt-tab-icon">‚ö°</span> Operational roles & rituals
    </button>
    <button class="dt-tab" data-target="dt-decisions">
      <span class="dt-tab-icon">üé≤</span> Local decision making
    </button>
    <button class="dt-tab" data-target="dt-improvements">
      <span class="dt-tab-icon">üí°</span> Improvements & experiments
    </button>
    <button class="dt-tab" data-target="dt-keep">
      <span class="dt-tab-icon">üîí</span> Work you usually keep
    </button>
    <button class="dt-tab" data-target="dt-diff">
      <span class="dt-tab-icon">‚öñÔ∏è</span> Delegation Vs. day-to-day team work
    </button>
  </div>

  <div class="dt-content">
    <div id="dt-feature" class="dt-panel dt-panel-active">
      <h3>Feature and project ownership</h3>
      <p class="dt-intro">
        Delegate ownership of concrete features and small projects so others
        plan, coordinate and deliver end to end.
      </p>
      <ul>
        <li>Give engineers end to end ownership of a feature or small project.</li>
        <li>Ask them to write the first draft of the tech design and plan.</li>
        <li>Let them coordinate 2 to 3 people working on the same feature.</li>
        <li>Make them responsible for keeping tickets and board in good shape.</li>
        <li>Have them run demos for stakeholders and collect feedback.</li>
      </ul>
    </div>

    <div id="dt-tech-areas" class="dt-panel">
      <h3>Technical area ownership</h3>
      <p class="dt-intro">
        Spread ownership of systems and domains instead of being the only expert.
      </p>
      <ul>
        <li>Assign owners for domains like payments, search, CI or mobile app.</li>
        <li>Make owners responsible for documentation and runbooks in their area.</li>
        <li>Let them make local technical choices within shared standards.</li>
        <li>Ask them to spot and propose tech debt work for their domain.</li>
        <li>Ensure each critical area has at least one backup, not just one hero.</li>
      </ul>
    </div>

    <div id="dt-operational" class="dt-panel">
      <h3>Operational roles and rituals</h3>
      <p class="dt-intro">
        Rotate facilitation and operational duties so the team runs itself.
      </p>
      <ul>
        <li>Delegate or rotate facilitation of standups and refinements.</li>
        <li>Assign release captain or incident commander roles across the team.</li>
        <li>Ask someone else to prepare weekly status updates for an initiative.</li>
        <li>Have team members run bug triage or infra review sessions.</li>
        <li>You decide which rituals exist and why, but you are not always the driver.</li>
      </ul>
    </div>

    <div id="dt-decisions" class="dt-panel">
      <h3>Local decision making</h3>
      <p class="dt-intro">
        Push reversible, low risk decisions to the people closest to the work.
      </p>
      <ul>
        <li>Let engineers choose libraries, API details and UX micro decisions.</li>
        <li>Let owners break down tasks and create their own estimates.</li>
        <li>Expect people to use your design and decision templates, not ask you every time.</li>
        <li>Step in only for cross team or hard to reverse architectural choices.</li>
        <li>Hold people accountable for the outcomes of the decisions they make.</li>
      </ul>
    </div>

    <div id="dt-improvements" class="dt-panel">
      <h3>Improvements and experiments</h3>
      <p class="dt-intro">
        Use delegation to make the team responsible for improving how you work.
      </p>
      <ul>
        <li>Ask volunteers to own developer experience topics like CI speed or tooling.</li>
        <li>Delegate small refactors and tech debt reduction plans.</li>
        <li>Let team members propose and run process tweaks as time boxed experiments.</li>
        <li>Give ownership of key metrics and dashboards for an area.</li>
        <li>Connect improvement themes to OKRs or clear goals, not just nice to haves.</li>
      </ul>
    </div>

    <div id="dt-keep" class="dt-panel">
      <h3>Work you usually keep as team lead</h3>
      <p class="dt-intro">
        Some responsibilities stay with you, even if you involve seniors in the work.
      </p>
      <ul>
        <li>Hiring, performance management, promotions and serious conflict.</li>
        <li>Defining team mission, goals and what to prioritise or stop.</li>
        <li>Cross team negotiations, escalations and budget or headcount tradeoffs.</li>
        <li>High risk or hard to reverse decisions where you are directly accountable.</li>
        <li>Coaching (higher level people) and 1 to 1 relationships,
          even if you add mentors around people.
          (Guiding/mentoring new teammates or level 1 to 3 is OK to
          delegate)‚Äã</li>
      </ul>
    </div>

    <div id="dt-diff" class="dt-panel">
      <h3>How this differs from day to day team work</h3>
      <p class="dt-intro">
        Most coding and routine tasks are already delegated by default. The shift is what you
        choose to take back vs what you push out.
      </p>
      <ul>
        <li>Regular coding, bug fixing and test writing should live with the team, not with you.</li>
        <li>You only take hands on work when it is a teaching moment, a spike or a fire.</li>
        <li>Reversible, local decisions should be made by people closest to code or customers.</li>
        <li>If you are doing many critical tickets and running most meetings, you act as senior IC.</li>
        <li>If you delegate often similar types of repetitive tasks ‚Äì better, make them part of the team process‚Äã</li>
        <li>Ask yourself: could someone else do this 70 percent as well with my support? If yes, it is a delegation candidate.</li>
      </ul>
    </div>
  </div>
</div>

</div>

<script>
  const steps = [
    {
      id: "assess",
      label: "Assess Task(s)",
      icon: "üîç",
      short: "Understand what you are delegating before thinking about who.",
      bullets: [
        "Clarify the concrete outcome and why it matters for your team or product.",
        "Estimate impact, complexity and risk so you can choose the right owner.",
        "Identify dependencies, stakeholders and any hidden constraints.",
        "Decide whether this belongs in your goals or OKRs for the period.",
        "Split large initiatives into smaller chunks that can be safely delegated."
      ]
    },
    {
      id: "select-person",
      label: "Select appropriate person",
      icon: "üë§",
      short: "Match the work to strengths, growth goals and capacity.",
      bullets: [
        "Look at both skill and motivation for this specific type of task.",
        "Use delegation to grow people one step beyond their current comfort zone.",
        "Avoid always picking the same senior as the safe option.",
        "Check current load so the person can actually own the work.",
        "Think about redundancy: who else could back them up if needed."
      ]
    },
    {
      id: "brief",
      label: "Prepare and present brief",
      icon: "üìã",
      short: "Turn the task into a clear, written brief before you hand it over.",
      bullets: [
        "Write a short one pager: background, goal, constraints, timeline.",
        "Highlight key risks, unknowns and decisions that will likely appear.",
        "Share relevant docs, designs and examples of what good looks like.",
        "Present the brief live and invite questions, do not just drop a link.",
        "Check that the owner has enough context to take decisions without you."
      ]
    },
    {
      id: "expectations",
      label: "Set expectations",
      icon: "üéØ",
      short: "Make success and working norms explicit so nobody has to guess.",
      bullets: [
        "Agree on definition of done and quality standards up front.",
        "Clarify decision rights: what they can decide, what must be escalated.",
        "Set check in rhythm and format for updates and demos.",
        "Align on how to handle surprises, scope changes or delays.",
        "Confirm understanding by asking them to summarize the plan in their words."
      ]
    },
    {
      id: "support-monitor",
      label: "Provide support and monitor",
      icon: "üõü",
      short: "Stay available and curious without taking the work back.",
      bullets: [
        "Use regular check ins to focus on outcomes, risks and next steps.",
        "Ask ‚ÄúWhat do you need from me‚Äù instead of ‚ÄúHave you done X yet‚Äù.",
        "Remove blockers and protect the owner from unnecessary noise and politics.",
        "Offer pairing, reviews or access to experts when they hit hard problems.",
        "Adjust the level of guidance if work repeatedly drifts off course."
      ]
    },
    {
      id: "evaluate",
      label: "Evaluate outcomes",
      icon: "üìä",
      short: "Close the loop, learn together and recognize the work.",
      bullets: [
        "Compare actual results to the expected outcomes and metrics.",
        "Run a short retro: what went well, what was hard, what to change next time.",
        "Give specific feedback on both the result and the way of working.",
        "Share credit publicly so others see that ownership is real.",
        "Capture useful artifacts: docs, checklists, diagrams and decisions."
      ]
    },
    {
      id: "improve-system",
      label: "Maintain and improve your system",
      icon: "‚öôÔ∏è",
      short: "Treat delegation as a system that you continuously refine.",
      bullets: [
        "Update playbooks, templates and runbooks that made this delegation easier.",
        "Revisit who owns which domains and processes in the team.",
        "Look for recurring bottlenecks and single points of failure to eliminate.",
        "Feed lessons into your goals and OKRs for the next quarter.",
        "Plan the next delegation moves that will make you less of a bottleneck."
      ]
    }
  ];

  const colors = [
    "#f97316", // amber
    "#ec4899", // pink
    "#6366f1", // indigo
    "#22c55e", // green
    "#0ea5e9", // sky
    "#a855f7", // violet
    "#eab308"  // yellow
  ];

  const wheel = document.getElementById("delegationWheel");

  const cx = 200;
  const cy = 200;
  const radius = 170;
  const innerRadius = 75;
  const segmentCount = steps.length;
  const gapAngle = 0.04; // gap between segments in radians
  const slice = (Math.PI * 2) / segmentCount;

  function polarToCartesian(centerX, centerY, r, angleRad) {
    return {
      x: centerX + r * Math.cos(angleRad),
      y: centerY + r * Math.sin(angleRad)
    };
  }

  // Create arrow ring first (behind segments)
  function createArrowRing() {
    const arrowRadius = radius + 14;
    const arrowGroup = document.createElementNS("http://www.w3.org/2000/svg", "g");
    
    // Draw arrow arcs between each segment (from end of one to start of next)
    for (let i = 0; i < segmentCount; i++) {
      // Arrow starts near end of current segment and ends near start of next segment
      const segmentEndAngle = -Math.PI / 2 + (i + 1) * slice - gapAngle / 2;
      const nextSegmentStartAngle = -Math.PI / 2 + (i + 1) * slice + gapAngle / 2;
      
      const startAngle = segmentEndAngle - slice * 0.12;
      const endAngle = nextSegmentStartAngle + slice * 0.12;
      
      const start = polarToCartesian(cx, cy, arrowRadius, startAngle);
      const end = polarToCartesian(cx, cy, arrowRadius, endAngle);
      
      // Arc path
      const arcPath = document.createElementNS("http://www.w3.org/2000/svg", "path");
      const d = [
        "M", start.x, start.y,
        "A", arrowRadius, arrowRadius, 0, 0, 1, end.x, end.y
      ].join(" ");
      arcPath.setAttribute("d", d);
      arcPath.setAttribute("class", "process-arrow");
      arrowGroup.appendChild(arcPath);
      
      // Arrow head at end of each arc
      const headAngle = endAngle;
      const headSize = 7;
      const tipPos = polarToCartesian(cx, cy, arrowRadius, headAngle);
      const tangentAngle = headAngle + Math.PI / 2; // perpendicular to radius
      
      const p1 = {
        x: tipPos.x + headSize * Math.cos(tangentAngle),
        y: tipPos.y + headSize * Math.sin(tangentAngle)
      };
      const p2 = {
        x: tipPos.x + headSize * Math.cos(tangentAngle - 2.5),
        y: tipPos.y + headSize * Math.sin(tangentAngle - 2.5)
      };
      const p3 = {
        x: tipPos.x + headSize * Math.cos(tangentAngle + 2.5),
        y: tipPos.y + headSize * Math.sin(tangentAngle + 2.5)
      };
      
      const arrowHead = document.createElementNS("http://www.w3.org/2000/svg", "polygon");
      arrowHead.setAttribute("points", `${p1.x},${p1.y} ${p2.x},${p2.y} ${p3.x},${p3.y}`);
      arrowHead.setAttribute("class", "arrow-head");
      arrowGroup.appendChild(arrowHead);
    }
    
    wheel.appendChild(arrowGroup);
  }

  function createSegment(step, index) {
    const startAngle = -Math.PI / 2 + index * slice + gapAngle / 2;
    const endAngle = -Math.PI / 2 + (index + 1) * slice - gapAngle / 2;
    
    const outerStart = polarToCartesian(cx, cy, radius, startAngle);
    const outerEnd = polarToCartesian(cx, cy, radius, endAngle);
    const innerStart = polarToCartesian(cx, cy, innerRadius, startAngle);
    const innerEnd = polarToCartesian(cx, cy, innerRadius, endAngle);

    const largeArcFlag = (endAngle - startAngle) > Math.PI ? 1 : 0;

    // Donut segment path: outer arc -> line to inner -> inner arc (reverse) -> close
    const d = [
      "M", outerStart.x, outerStart.y,
      "A", radius, radius, 0, largeArcFlag, 1, outerEnd.x, outerEnd.y,
      "L", innerEnd.x, innerEnd.y,
      "A", innerRadius, innerRadius, 0, largeArcFlag, 0, innerStart.x, innerStart.y,
      "Z"
    ].join(" ");

    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
    path.setAttribute("d", d);
    path.setAttribute("fill", colors[index % colors.length]);
    path.setAttribute("class", "segment");
    path.dataset.index = index;

    // Label positioned at center of donut segment
    const midAngle = (startAngle + endAngle) / 2;
    const midRadius = (radius + innerRadius) / 2;
    const labelPos = polarToCartesian(cx, cy, midRadius, midAngle);

    const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
    text.setAttribute("x", labelPos.x);
    text.setAttribute("y", labelPos.y);
    text.setAttribute("class", "segment-label");

    const words = step.label.split(" ");
    const lines = [];
    let current = "";

    words.forEach(word => {
      if ((current + " " + word).trim().length > 14) {
        lines.push(current.trim());
        current = word;
      } else {
        current += " " + word;
      }
    });
    if (current.trim().length) lines.push(current.trim());

    const lineHeight = 14;
    const startY = labelPos.y - ((lines.length - 1) * lineHeight) / 2 + 10;

    lines.forEach((line, i) => {
      const tspan = document.createElementNS("http://www.w3.org/2000/svg", "tspan");
      tspan.setAttribute("x", labelPos.x);
      tspan.setAttribute("y", startY + i * lineHeight);
      tspan.textContent = line;
      text.appendChild(tspan);
    });

    // Add icon above the label
    const icon = document.createElementNS("http://www.w3.org/2000/svg", "text");
    icon.setAttribute("x", labelPos.x);
    icon.setAttribute("y", labelPos.y - (lines.length * lineHeight / 2) - 4);
    icon.setAttribute("class", "segment-icon");
    icon.textContent = step.icon;

    path.addEventListener("click", () => selectStep(index));
    text.addEventListener("click", () => selectStep(index));
    icon.addEventListener("click", () => selectStep(index));

    wheel.appendChild(path);
    wheel.appendChild(text);
    wheel.appendChild(icon);
  }

  // draw arrow ring first (behind segments)
  createArrowRing();

  // draw segments
  steps.forEach((step, idx) => {
    createSegment(step, idx);
  });

  // center circle and icon
  const center = document.createElementNS("http://www.w3.org/2000/svg", "circle");
  center.setAttribute("cx", cx);
  center.setAttribute("cy", cy);
  center.setAttribute("r", innerRadius - 4);
  center.setAttribute("class", "center-circle");
  wheel.appendChild(center);

  const centerText = document.createElementNS("http://www.w3.org/2000/svg", "text");
  centerText.setAttribute("x", cx);
  centerText.setAttribute("y", cy + 8);
  centerText.setAttribute("text-anchor", "middle");
  centerText.setAttribute("class", "center-icon");
  centerText.textContent = "ü§ù";
  wheel.appendChild(centerText);

  // detail panel
  const detailStepLabel = document.getElementById("detailStepLabel");
  const detailTitle = document.getElementById("detailTitle");
  const detailSubtitle = document.getElementById("detailSubtitle");
  const detailList = document.getElementById("detailList");

  // Lighter versions of colors for active stroke
  const lightColors = [
    "#fdc689", // light orange
    "#f9a8d4", // light pink
    "#a5b4fc", // light indigo
    "#86efac", // light green
    "#7dd3fc", // light sky
    "#d8b4fe", // light violet
    "#fde047"  // light yellow
  ];

  function selectStep(index) {
    document
      .querySelectorAll(".segment")
      .forEach(el => {
        el.classList.remove("active");
        el.style.stroke = "transparent";
      });

    const activePath = document.querySelector(`.segment[data-index="${index}"]`);
    if (activePath) {
      activePath.classList.add("active");
      activePath.style.stroke = lightColors[index % lightColors.length];
    }

    const step = steps[index];
    detailStepLabel.textContent = `Step ${index + 1} of ${steps.length}`;
    detailTitle.textContent = step.label;
    detailSubtitle.textContent = step.short;

    detailList.innerHTML = "";
    step.bullets.forEach(text => {
      const li = document.createElement("li");
      li.textContent = text;
      detailList.appendChild(li);
    });
  }

  // initial selection
  selectStep(0);

  // Delegation types tab switching
  document.querySelectorAll('.dt-tab').forEach(tab => {
    tab.addEventListener('click', () => {
      // Remove active from all tabs and panels
      document.querySelectorAll('.dt-tab').forEach(t => t.classList.remove('dt-tab-active'));
      document.querySelectorAll('.dt-panel').forEach(p => p.classList.remove('dt-panel-active'));
      
      // Add active to clicked tab and corresponding panel
      tab.classList.add('dt-tab-active');
      const targetId = tab.getAttribute('data-target');
      document.getElementById(targetId).classList.add('dt-panel-active');
    });
  });
</script>
</body>
</html>
